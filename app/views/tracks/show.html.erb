<div>
  <div>
    <%= image_tag @track.track_image.url %>
    <h2><%= @track.name %></h2>
    <p><%= link_to @track.user.username, user_path(@track.user) %></p>
    <%= audio_tag @track.track, controls: true %>
  </div>
</div>

<div>
  <%= image_tag @track.user.profile_picture.url %>
  <p><%= link_to @track.user.username, user_path(@track.user) %></p>
  <p>Last active: <%= @track.user.last_sign_in_at %></p>
</div>

<div>
  <h3>Comments (<%= @track.comments.count %>):</h3>
  <% if user_signed_in? %>
    <%= image_tag @user.profile_picture.url %>
  <% else %>
    <div></div>
  <% end %>
  <% if user_signed_in? %>
    <%= form_for @comment do |f| %>
      <%= f.hidden_field :track_id, value: @track.id %>
      <%= f.text_area :content, placeholder: 'Write a comment...' %>
      <br>
      <%= f.submit 'Submit Comment' %>
    <% end %>
  <% end %>
</div>

<div>
  <% @comments.each do |comment| %>
    <div>
      <%= image_tag comment.user.profile_picture %>
      <p><%= link_to comment.user.username, user_path(comment.user) %> says:</p>
      <p><%= comment.created_at.to_formatted_s(:short) %></p>
      <p><%= comment.content %></p>
      <% if user_signed_in? %>
        <p><%= link_to 'Delete', comment_path(comment), method: :delete %></p>
      <% end %>
    </div>
  <% end %>
</div>